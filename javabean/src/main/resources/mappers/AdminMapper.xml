<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.jb.jbean.persistence.AdminMapper">

<sql id="search">
	<if test="searchType != null">
	 ${searchType} like '%'||#{keyword}||'%'
	</if>	
</sql>


<insert id="productInsert" parameterType="provo">
	insert into Product3 values
	(seq_Proidx.NEXTVAL,#{proname},#{proprice},#{procnt},#{prosize},#{promain},#{prosub1},#{prosub2},#{proinfo},default,null,default,#{cidx},#{pronum})
</insert>

<select id="productSelect" parameterType="provo" resultType="provo">
	select * from Product3 where Cidx like '%'||#{cidx}||'%' and Proname like '%'||#{proname}||'%' 
	and Proprice like '%'||#{proprice}||'%'
</select>

<select id="productAll" resultType="provo">
	select * from Product3 where Prodel_yn='N' order by cidx, proname
</select>

<select id="productModify" parameterType="Integer" resultType="provo">
	select * from Product3 where Proidx=#{proidx}
</select>

<update id="productUpdate" parameterType="provo">
	update Product3 set Proname=#{proname}, Proprice=#{proprice}, Procnt=#{procnt} , 
	Prosize=#{prosize},Promain=#{promain},Prosub1=#{prosub1},Prosub2=#{prosub2},Proinfo=#{proinfo},Promday=sysdate 
	where Proidx=#{proidx} 
</update>

<update id="productDelete" parameterType="Integer">
update Product3 set Prodel_yn='Y' where Proidx=#{proidx}
</update>

<select id="memberAll" resultType="mvo">
select * from Member3 order by Mdel_yn
</select>

<select id="memberCare" parameterType="scri" resultType="mvo">
<![CDATA[
select * from Member3 where
]]> 
<include refid="search"></include>
<![CDATA[
order by Mdel_yn]]> 
</select>

<select id="memberModfiyOne" resultType="mvo">
select * from Member3 where Mdel_yn='N' and Midx=#{midx}
</select>

<update id="adminMemberModify" parameterType="mvo">
update Member3 set Mname=#{mname}, Mpwd=#{mpwd}, Mmail=#{mmail},
 Mphone=#{mphone}, Mpost=#{mpost}, Maddr1=#{maddr1}, Maddr2=#{maddr2}, Mmday=sysdate where Midx=#{midx}
</update>

<update id="adminMemberDelete" parameterType="Integer">
update Member3 set mdel_yn='Y' where Midx=#{midx}
</update>

</mapper>
